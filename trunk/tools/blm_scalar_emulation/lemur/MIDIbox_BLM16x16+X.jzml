<JZML>
<PROJECT version="4110" width="1024" height="724" osc_target="-1" midi_target="-1" kbmouse_target="-1" skin="Classic"/>
<WINDOW class="JAZZINTERFACE" text="Default" x="0" y="0" width="1024" height="724" state="1" group="0" font="tahoma,11,0" >
<WINDOW class="Pads" text="BLM" x="249" y="48" width="708" height="608" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="-1" kbmouse_target="-2" capture="1" color="7884288,944013" column="16" label="0" multicolor="1" multilabel="0" row="16">
<PARAM name="x=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="-2" osc_trigger="1" osc_message="/BLM/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attack=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM/attack" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="decay=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM/decay" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="sustain=1" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM/sustain" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="release=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM/release" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hold=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM/hold" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM/light" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="last_press=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM/last_press" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledGreen=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM/ledGreen" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledRed=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM/ledRed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="action()" script="decl i, out;
decl changes = nonnull(x - last_press);

for(i=0; i<sizeof(changes); ++i) {
	decl ix = changes[i];
	decl row = ix >> 4;
	decl col = ix & 0x0f;
	decl state = x[ix];
	decl vel = state ? 0x7f : 0x00;

	midiout(0, {0x90 + row, col, vel});

	// extra for OSC connection (can't send MIDI parameters...) 
	sendOscNote({row, col, vel});
}	

last_press = x;
" trigger_script="x" trigger_type="0" trigger="1" osc_message="/BLM/action" midi_message="0x90,0x90,0,0" midi_target="-2" flag="1"/>
<SCRIPT name="setLedPattern8_H(ARGS)" script="decl colOffset = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({colOffset+i, row, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM/setLedPattern8_H" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLedPattern8_V(ARGS)" script="decl col = ARGS[0];
decl rowOffset = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({col, rowOffset+i, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM/setLedPattern8_V" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLed(ARGS)" script="decl col = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl on = ARGS[3];

decl ix = 16*row + col;

if( colourIx == 0 )
	ledGreen[ix] = on;
else
	ledRed[ix] = on;


decl state = 0;
if( ledGreen[ix] ) {
	state = state | 1;
}
if( ledRed[ix] ) {
	state = state | 2;
}

decl colors = getattribute(BLM, 'colors');
if( state == 1 ) {
	colors[ix] = 0x00ee00;
} else if( state == 2 ) {
	colors[ix] = 0xee0000;
} else if( state == 3 ) {
	colors[ix] = 0xeeee00;
} else {
	colors[ix] = 0x111122;
}
setattribute(BLM, 'colors', colors);
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM/setLed" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl col;
decl row;

for(col=0; col<16; ++col)
	for(row=0; row<16; ++row) {
		setLed({col, row, 0, 0});
		setLed({col, row, 1, 0});
	}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Fader" x="0" y="48" width="60" height="200" id="1" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="0" kbmouse_target="-2" capture="1" color="6451712" cursor="0" grid="0" grid_steps="1" label="0" physic="1" precision="3" unit="" value="0" zoom="1.000000">
<PARAM name="x=" value="0.319149" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader/x" midi_target="-2" midi_trigger="1" midi_message="0xB0,0xB0,1,1" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Pads" text="BLM_ExtraColumn" x="198" y="48" width="43" height="608" id="3" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="-1" kbmouse_target="-2" capture="1" color="7884288,944013" column="1" label="0" multicolor="1" multilabel="0" row="16">
<PARAM name="x=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attack=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/attack" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="decay=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/decay" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="sustain=1" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/sustain" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="release=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/release" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hold=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/hold" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/light" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="last_press=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/last_press" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledGreen=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/ledGreen" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledRed=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumn/ledRed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="action()" script="decl i, out;
decl changes = nonnull(x - last_press);

for(i=0; i<sizeof(changes); ++i) {
	decl ix = changes[i];
	decl state = x[ix];
	decl vel = state ? 0x7f : 0x00;

	midiout(0, {0x90 + ix, 0x40, vel});

	// extra for OSC connection (can't send MIDI parameters...) 
	sendOscNote({ix, 0x40, vel});
}	

last_press = x;
" trigger_script="x" trigger_type="0" trigger="1" osc_message="/BLM_ExtraColumn/action" midi_message="0x90,0x90,0,0" midi_target="-2" flag="1"/>
<SCRIPT name="setLedPattern8_H(ARGS)" script="decl colOffset = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({colOffset+i, row, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumn/setLedPattern8_H" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLedPattern8_V(ARGS)" script="decl col = ARGS[0];
decl rowOffset = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({col, rowOffset+i, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumn/setLedPattern8_V" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLed(ARGS)" script="decl col = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl on = ARGS[3];

//decl ix = 16*row + col;
decl ix = row; // extra row has no columns

if( colourIx == 0 )
	ledGreen[ix] = on;
else
	ledRed[ix] = on;

decl state = 0;
if( ledGreen[ix] ) {
	state = state | 1;
}
if( ledRed[ix] ) {
	state = state | 2;
}

decl colors = getattribute(BLM_ExtraColumn, 'colors');
if( state == 1 ) {
	colors[ix] = 0x00ee00;
} else if( state == 2 ) {
	colors[ix] = 0xee0000;
} else if( state == 3 ) {
	colors[ix] = 0xeeee00;
} else {
	colors[ix] = 0x111122;
}
setattribute(BLM_ExtraColumn, 'colors', colors);
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumn/setLed" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl col = 0;
decl row;

for(row=0; row<16; ++row) {
	setLed({col, row, 0, 0});
	setLed({col, row, 1, 0});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumn/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Pads" text="BLM_ExtraRow" x="249" y="664" width="708" height="38" id="4" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="-1" kbmouse_target="-2" capture="1" color="7884288,944013" column="16" label="0" multicolor="1" multilabel="0" row="1">
<PARAM name="x=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attack=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/attack" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="decay=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/decay" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="sustain=1" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/sustain" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="release=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/release" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hold=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/hold" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/light" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="last_press=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/last_press" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledGreen=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/ledGreen" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledRed=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraRow/ledRed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="action()" script="decl i, out;
decl changes = nonnull(x - last_press);

for(i=0; i<sizeof(changes); ++i) {
	decl ix = changes[i];
	decl state = x[ix];
	decl vel = state ? 0x7f : 0x00;

	midiout(0, {0x90, 0x60 + ix, vel});

	// extra for OSC connection (can't send MIDI parameters...) 
	sendOscNote({0, 0x60 + ix, vel});
}	

last_press = x;
" trigger_script="x" trigger_type="0" trigger="1" osc_message="/BLM_ExtraRow/action" midi_message="0x90,0x90,0,0" midi_target="-2" flag="1"/>
<SCRIPT name="setLedPattern8_H(ARGS)" script="decl colOffset = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({colOffset+i, row, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraRow/setLedPattern8_H" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLedPattern8_V(ARGS)" script="decl col = ARGS[0];
decl rowOffset = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({col, rowOffset+i, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraRow/setLedPattern8_V" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLed(ARGS)" script="decl col = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl on = ARGS[3];

decl ix = 16*row + col;

if( colourIx == 0 )
	ledGreen[ix] = on;
else
	ledRed[ix] = on;


decl state = 0;
if( ledGreen[ix] ) {
	state = state | 1;
}
if( ledRed[ix] ) {
	state = state | 2;
}

decl colors = getattribute(BLM_ExtraRow, 'colors');
if( state == 1 ) {
	colors[ix] = 0x00ee00;
} else if( state == 2 ) {
	colors[ix] = 0xee0000;
} else if( state == 3 ) {
	colors[ix] = 0xeeee00;
} else {
	colors[ix] = 0x111122;
}
setattribute(BLM_ExtraRow, 'colors', colors);
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraRow/setLed" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl col;
decl row = 0;

for(col=0; col<16; ++col) {
	setLed({col, row, 0, 0});
	setLed({col, row, 1, 0});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraRow/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Pads" text="BLM_Shift" x="198" y="664" width="43" height="38" id="5" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="-1" kbmouse_target="-2" capture="1" color="7884288,944013" column="1" label="0" multicolor="1" multilabel="0" row="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attack=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/attack" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="decay=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/decay" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="sustain=1" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/sustain" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="release=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/release" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hold=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/hold" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/light" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="last_press=" value="0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/last_press" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledGreen=" value="0,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/ledGreen" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledRed=" value="0,0.000000,0.000000,0.000000,1.000000,0.000000,0.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_Shift/ledRed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="action()" script="decl i, out;
decl changes = nonnull(x - last_press);

for(i=0; i<sizeof(changes); ++i) {
	decl ix = 0;
	decl state = x[ix];
	decl vel = state ? 0x7f : 0x00;

	midiout(0, {0x9f, 0x60 + ix, vel});

	// extra for OSC connection (can't send MIDI parameters...) 
	sendOscNote({15, 0x60 + ix, vel});
}	

last_press = x;
" trigger_script="x" trigger_type="0" trigger="1" osc_message="/BLM_Shift/action" midi_message="0x90,0x90,0,0" midi_target="-2" flag="1"/>
<SCRIPT name="setLedPattern8_H(ARGS)" script="decl colOffset = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({colOffset+i, row, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_Shift/setLedPattern8_H" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLedPattern8_V(ARGS)" script="decl col = ARGS[0];
decl rowOffset = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({col, rowOffset+i, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_Shift/setLedPattern8_V" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLed(ARGS)" script="decl col = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl on = ARGS[3];

decl ix = 16*row + col;

if( colourIx == 0 )
	ledGreen[ix] = on;
else
	ledRed[ix] = on;

decl state = 0;
if( ledGreen[ix] ) {
	state = state | 1;
}
if( ledRed[ix] ) {
	state = state | 2;
}

decl colors = getattribute(BLM_Shift, 'colors');
if( state == 1 ) {
	colors[ix] = 0x00ee00;
} else if( state == 2 ) {
	colors[ix] = 0xee0000;
} else if( state == 3 ) {
	colors[ix] = 0xeeee00;
} else {
	colors[ix] = 0x111122;
}
setattribute(BLM_Shift, 'colors', colors);
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_Shift/setLed" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl col = 0;
decl row = 0;

setLed({col, row, 0, 0});
setLed({col, row, 1, 0});
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_Shift/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="MyName" x="0" y="0" width="1024" height="32" id="6" state="245" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="8355711" content="midibox.org    BLM16x16+X">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/MyName/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="CustomButton" text="ConnectButton" x="935" y="0" width="89" height="48" id="2" state="241" group="0" font="tahoma,8,0" send="1" osc_target="-2" midi_target="0" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="8352867,8388608" label_off="Disconnected" label_on="Connected" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/ConnectButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/ConnectButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="action()" script="sendBlmLayout();

// X will be set by onSysEx() once message received
x = 0;
" trigger_script="x" trigger_type="0" trigger="1" osc_message="/ConnectButton/action" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Fader2" x="0" y="273" width="60" height="200" id="7" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="0" kbmouse_target="-2" capture="1" color="6451712" cursor="0" grid="0" grid_steps="1" label="0" physic="1" precision="3" unit="" value="0" zoom="1.000000">
<PARAM name="x=" value="0.517730" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader2/x" midi_target="-2" midi_trigger="1" midi_message="0xB1,0xB1,1,1" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader2/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader2/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader2/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader2/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader2/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Fader" text="Fader3" x="0" y="502" width="60" height="200" id="8" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="0" kbmouse_target="-2" capture="1" color="6451712" cursor="0" grid="0" grid_steps="1" label="0" physic="1" precision="3" unit="" value="0" zoom="1.000000">
<PARAM name="x=" value="0.368794" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader3/x" midi_target="-2" midi_trigger="1" midi_message="0xB2,0xB2,1,1" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader3/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader3/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader3/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader3/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader3/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Fader" text="Fader4" x="964" y="48" width="60" height="200" id="9" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="0" kbmouse_target="-2" capture="1" color="6451712" cursor="0" grid="0" grid_steps="1" label="0" physic="1" precision="3" unit="" value="0" zoom="1.000000">
<PARAM name="x=" value="0.198582" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader4/x" midi_target="-2" midi_trigger="1" midi_message="0xB3,0xB3,1,1" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader4/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader4/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader4/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader4/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader4/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Fader" text="Fader5" x="964" y="273" width="60" height="200" id="10" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="0" kbmouse_target="-2" capture="1" color="6451712" cursor="0" grid="0" grid_steps="1" label="0" physic="1" precision="3" unit="" value="0" zoom="1.000000">
<PARAM name="x=" value="0.716312" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader5/x" midi_target="-2" midi_trigger="1" midi_message="0xB4,0xB4,1,1" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader5/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader5/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader5/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader5/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader5/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Fader" text="Fader6" x="964" y="502" width="60" height="200" id="11" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="0" kbmouse_target="-2" capture="1" color="6451712" cursor="0" grid="0" grid_steps="1" label="0" physic="1" precision="3" unit="" value="0" zoom="1.000000">
<PARAM name="x=" value="0.368794" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader6/x" midi_target="-2" midi_trigger="1" midi_message="0xB5,0xB5,1,1" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Fader6/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader6/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader6/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader6/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Fader6/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="60" y="620" width="79" height="36" id="12" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="Alt">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text2" x="60" y="582" width="79" height="36" id="13" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="Grid">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text2/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text3" x="60" y="542" width="79" height="36" id="14" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="Tracks">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text3/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text4" x="60" y="504" width="79" height="36" id="15" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="Patterns">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text4/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text5" x="60" y="466" width="79" height="36" id="16" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="Keyboard">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text5/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text6" x="60" y="48" width="79" height="36" id="17" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="Start">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text6/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text7" x="60" y="88" width="79" height="36" id="18" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="Stop">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text7/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Pads" text="BLM_ExtraColumnShift" x="147" y="48" width="43" height="608" id="19" state="1" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="-1" kbmouse_target="-2" capture="1" color="7884288,944013" column="1" label="0" multicolor="1" multilabel="0" row="16">
<PARAM name="x=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attack=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/attack" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="decay=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/decay" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="sustain=1" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/sustain" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="release=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/release" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hold=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/hold" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/light" midi_target="-2" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="last_press=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/last_press" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledGreen=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/ledGreen" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ledRed=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="1" osc_target="-2" osc_trigger="1" osc_message="/BLM_ExtraColumnShift/ledRed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-2" kbmouse_trigger="1" kbmouse_message="-205,12595,-205" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="action()" script="decl i, out;
decl changes = nonnull(x - last_press);

for(i=0; i<sizeof(changes); ++i) {
	decl ix = changes[i];
	decl state = x[ix];
	decl vel = state ? 0x7f : 0x00;

	midiout(0, {0x90 + ix, 0x50, vel});

	// extra for OSC connection (can't send MIDI parameters...) 
	sendOscNote({ix, 0x50, vel});
}	

last_press = x;
" trigger_script="x" trigger_type="0" trigger="1" osc_message="/BLM_ExtraColumnShift/action" midi_message="0x90,0x90,0,0" midi_target="-2" flag="1"/>
<SCRIPT name="setLedPattern8_H(ARGS)" script="decl colOffset = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({colOffset+i, row, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumnShift/setLedPattern8_H" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLedPattern8_V(ARGS)" script="decl col = ARGS[0];
decl rowOffset = ARGS[1];
decl colourIx = ARGS[2];
decl pattern = ARGS[3];

// workaround... it seems that shift operations such as (1 << x) are not working!
// therefore we delcare an andMask here
decl andMask = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

decl i;
for(i=0; i<8; ++i) {
	decl on = (pattern & andMask[i]) ? 1 : 0;
	setLed({col, rowOffset+i, colourIx, on});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumnShift/setLedPattern8_V" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setLed(ARGS)" script="decl col = ARGS[0];
decl row = ARGS[1];
decl colourIx = ARGS[2];
decl on = ARGS[3];

//decl ix = 16*row + col;
decl ix = row; // extra row has no columns

if( colourIx == 0 )
	ledGreen[ix] = on;
else
	ledRed[ix] = on;


decl state = 0;
if( ledGreen[ix] ) {
	state = state | 1;
}
if( ledRed[ix] ) {
	state = state | 2;
}

decl colors = getattribute(BLM_ExtraColumnShift, 'colors');
if( state == 1 ) {
	colors[ix] = 0x00ee00;
} else if( state == 2 ) {
	colors[ix] = 0xee0000;
} else if( state == 3 ) {
	colors[ix] = 0xeeee00;
} else {
	colors[ix] = 0x111122;
}
setattribute(BLM_ExtraColumnShift, 'colors', colors);
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumnShift/setLed" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl col = 0;
decl row;

for(row=0; row<16; ++row) {
	setLed({col, row, 0, 0});
	setLed({col, row, 1, 0});
}
" trigger_script="" trigger_type="4" trigger="1" osc_message="/BLM_ExtraColumnShift/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text8" x="60" y="430" width="79" height="36" id="20" state="229" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="5144439" content="303">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Text8/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
<VARIABLE name="timerCounter=" value="20.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/timerCounter" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="midiDataReceived=" value="0" send="1" osc_target="0" osc_trigger="1" osc_message="/midiDataReceived" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="arraytohex(array)" script="// from http://liine.net/forum/viewtopic.php?f=25&t=729&start=10

decl a, b, c , i;
c = sizeof(array)*3-1;
a = fill(1,32,c);
for(i = 0; i < c; i++){
 b = array[i] >> 4;
 a[i*3] = b > 9 ? b+55 : b+48;
 b = array[i] & 0xF;
 a[i*3+1] = b > 9 ? b+55 : b+48;
}

return arraytostring(a);
" trigger_script="" trigger_type="4" trigger="1" osc_message="/arraytohex" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="sendBlmLayout()" script="decl deviceId = 0x00;
decl blmColumns = 16;
decl blmRows = 16;
decl blmColors = 2;

// MIDI
midiout(0, {0xf0, 0x00, 0x00, 0x7e, 0x4e, deviceId, 0x01, blmColumns, blmRows, blmColors, 1, 1, 1, 0xf7});

// extra for OSC connection (can't send MIDI parameters...) 
sendOscCC({0x0f, 0x7f, 0x01}); // chn, cc, value
" trigger_script="" trigger_type="4" trigger="1" osc_message="/sendBlmLayout" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="sendBlmAck()" script="decl deviceId = 0x00;

midiout(0, {0xf0, 0x00, 0x00, 0x7e, 0x4e, deviceId, 0x0f, 0x00, 0xf7});

// extra for OSC connection (can't send MIDI parameters...) 
sendOscCC({0x0f, 0x7f, 0x7f}); // chn, cc, value

" trigger_script="" trigger_type="4" trigger="1" osc_message="/sendBlmAck" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(MIDI_ARGS)" script="//Monitor.value = arraytohex(MIDI_ARGS);

decl chn = MIDI_ARGS[2];
decl cc = MIDI_ARGS[0];

decl pattern = MIDI_ARGS[1];
if( cc & 0x01 )
	pattern = pattern | (1 << 7);

decl ccCommand = cc & 0xfe;

// 16x16 green
     if( ccCommand == 0x10 ) { BLM.setLedPattern8_H({0, chn, 0, pattern}); } 
else if( ccCommand == 0x12 ) { BLM.setLedPattern8_H({8, chn, 0, pattern}); }

// 16x16 green rotated
else if( ccCommand == 0x18 ) { BLM.setLedPattern8_V({chn, 0, 0, pattern}); } 
else if( ccCommand == 0x1a ) { BLM.setLedPattern8_V({chn, 8, 0, pattern}); }

// 16x16 red
else if( ccCommand == 0x20 ) { BLM.setLedPattern8_H({0, chn, 1, pattern}); } 
else if( ccCommand == 0x22 ) { BLM.setLedPattern8_H({8, chn, 1, pattern}); }

// 16x16 red rotated
else if( ccCommand == 0x28 ) { BLM.setLedPattern8_V({chn, 0, 1, pattern}); } 
else if( ccCommand == 0x2a ) { BLM.setLedPattern8_V({chn, 8, 1, pattern}); }

// extra column green
else if( ccCommand == 0x40 && chn == 0 ) { BLM_ExtraColumn.setLedPattern8_V({0, 0, 0, pattern}); } 
else if( ccCommand == 0x42 && chn == 0 ) { BLM_ExtraColumn.setLedPattern8_V({0, 8, 0, pattern}); }

// extra column red
else if( ccCommand == 0x48 && chn == 0 ) { BLM_ExtraColumn.setLedPattern8_V({0, 0, 1, pattern}); } 
else if( ccCommand == 0x4a && chn == 0 ) { BLM_ExtraColumn.setLedPattern8_V({0, 8, 1, pattern}); }

// extra shift column green
else if( ccCommand == 0x50 && chn == 0 ) { BLM_ExtraColumnShift.setLedPattern8_V({0, 0, 0, pattern}); } 
else if( ccCommand == 0x52 && chn == 0 ) { BLM_ExtraColumnShift.setLedPattern8_V({0, 8, 0, pattern}); }

// extra shift column red
else if( ccCommand == 0x58 && chn == 0 ) { BLM_ExtraColumnShift.setLedPattern8_V({0, 0, 1, pattern}); } 
else if( ccCommand == 0x5a && chn == 0 ) { BLM_ExtraColumnShift.setLedPattern8_V({0, 8, 1, pattern}); }

// extra row green
else if( ccCommand == 0x60 && chn == 0 ) { BLM_ExtraRow.setLedPattern8_H({0, 0, 0, pattern}); } 
else if( ccCommand == 0x62 && chn == 0 ) { BLM_ExtraRow.setLedPattern8_H({8, 0, 0, pattern}); }

// extra row red
else if( ccCommand == 0x68 && chn == 0 ) { BLM_ExtraRow.setLedPattern8_H({0, 0, 1, pattern}); } 
else if( ccCommand == 0x6a && chn == 0 ) { BLM_ExtraRow.setLedPattern8_H({8, 0, 1, pattern}); }

// shift green/red
else if( ccCommand == 0x60 && chn == 15 ) { BLM_Shift.setLedPattern8_H({0, 0, 0, pattern}); } 
else if( ccCommand == 0x68 && chn == 15 ) { BLM_Shift.setLedPattern8_H({0, 0, 1, pattern}); } 

// notify that MIDI data has been received (used by timer)
midiDataReceived = 1;
" trigger_script="" trigger_type="3" trigger="1" osc_message="/onCC" midi_message="0xB0,0xBF,0,127" midi_target="0" flag="1"/>
<SCRIPT name="onSysEx(MIDI_ARGS)" script="// inspired from http://liine.net/forum/viewtopic.php?f=25&t=729&start=10

//Monitor.value = arraytohex(MIDI_ARGS);

if( MIDI_ARGS[0] == 0x00 &&
	MIDI_ARGS[1] == 0x00 &&
	MIDI_ARGS[2] == 0x7e &&
	MIDI_ARGS[3] == 0x4e &&
	MIDI_ARGS[4] == 0x00 ) {

	if( MIDI_ARGS[5] == 0x00 && MIDI_ARGS[6] == 0x00 ) {
		// layout request
		sendBlmLayout();
	} else if( MIDI_ARGS[5] == 0x0f && MIDI_ARGS[6] == 0x00 ) {
		// ping
		ConnectButton.x = 1; // enable button
	} else if( MIDI_ARGS[5] == 0x0f && MIDI_ARGS[6] == 0xf7 ) {
		// pong
		sendBlmAck();
	}
}

// MEMO:
//midiout(0, {0xF0, MIDI_ARGS}); // to include the sysex status byteAnd you can then access any byte like on any array : 
//if(MIDI_ARGS[0] == .....for(n =0; n < sizeof(MIDI_ARGS); n++) { .... }
" trigger_script="" trigger_type="3" trigger="1" osc_message="/onSysEx" midi_message="0xF0,0xF0,0,0" midi_target="0" flag="1"/>
<SCRIPT name="timer()" script="// send Layout (or Ack) each second
if( ++timerCounter >= 60 ) {
	timerCounter = 0;

	if( midiDataReceived )
		sendBlmAck();
	else
		sendBlmLayout();

	midiDataReceived = 0;
}
" trigger_script="" trigger_type="1" trigger="1" osc_message="/timer" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="BLM.init();
BLM_ExtraRow.init();
BLM_ExtraColumn.init();
BLM_ExtraColumnShift.init();
BLM_Shift.init();
ConnectButton.x = 0;


" trigger_script="" trigger_type="5" trigger="1" osc_message="/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onNote(MIDI_ARGS)" script="//Monitor.value = arraytohex(MIDI_ARGS);

decl chn = MIDI_ARGS[2];
decl note = MIDI_ARGS[0];
decl vel = MIDI_ARGS[1];

decl red, green;
     if( vel == 0   ) { red = 0; green = 0; }
else if( vel < 0x40 ) { red = 0; green = 1; }
else if( vel < 0x60 ) { red = 1; green = 0; }
else                  { red = 1; green = 1; }

if( note < 16 ) {
	decl row = chn;
	decl column = note;
	BLM.setLed({column, row, 0, green});
	BLM.setLed({column, row, 1, red});
} else if( note == 0x40 ) {
	decl row = chn;
	decl column = 0;
	BLM_ExtraColumn.setLed({column, row, 0, green});
	BLM_ExtraColumn.setLed({column, row, 1, red});
} else if( chn == 0 && (note >= 0x60 && note <= 0x6f) ) {
	decl row = 0;
	decl column = note - 0x60;
	BLM_ExtraRow.setLed({column, row, 0, green});
	BLM_ExtraRow.setLed({column, row, 1, red});
} else if( chn == 1 && note == 0x60 ) {
	decl row = 0;
	decl column = note - 0x60;
	BLM_Shift.setLed({column, row, 0, green});
	BLM_Shift.setLed({column, row, 1, red});
}

// notify that MIDI data has been received (used by timer)
midiDataReceived = 1;
" trigger_script="" trigger_type="3" trigger="1" osc_message="/onNote" midi_message="0x90,0x9F,0,127" midi_target="0" flag="1"/>
<SCRIPT name="onOsc(OSC_ARGS)" script="decl i;
for(i=0; i<sizeof(OSC_ARGS); ++i) {

	decl chn = (OSC_ARGS[i] >> 8) & 0x0f;
	decl cc = (OSC_ARGS[i] >> 16) & 0x7f;
	decl cc_value = (OSC_ARGS[i] >> 24) & 0x7f;

	//Monitor.value = {cc, cc_value, chn};
	// pass to CC handler
	onCC({cc, cc_value, chn});
}
" trigger_script="" trigger_type="2" trigger="1" osc_message="/BLM" midi_message="0x90,0x90,0,0" midi_target="-1" flag="9"/>
<SCRIPT name="onOscCC(OSC_ARGS)" script="//Monitor.value = arraytohex(OSC_ARGS);
if( OSC_ARGS[0] == 0x7f ) {
	if( OSC_ARGS[1] == 0x00 ) {
		// layout request
		sendBlmLayout();
	} else if( OSC_ARGS[1] == 0x7f ) {
		// ping
		ConnectButton.x = 1; // enable button
	} else if( OSC_ARGS[1] == 0x0f ) {
		// pong
		sendBlmAck();
	}
}
" trigger_script="" trigger_type="2" trigger="1" osc_message="/16/cc" midi_message="0x90,0x90,0,0" midi_target="-1" flag="9"/>
<SCRIPT name="sendOscCC(ARGS)" script="decl chn = ARGS[0];
decl cc = ARGS[1];
decl value = ARGS[2];

decl path = '/x/cc';
     if( chn ==  0 ) path = '/1/cc';
else if( chn ==  1 ) path = '/2/cc';
else if( chn ==  2 ) path = '/3/cc';
else if( chn ==  3 ) path = '/4/cc';
else if( chn ==  4 ) path = '/5/cc';
else if( chn ==  5 ) path = '/6/cc';
else if( chn ==  6 ) path = '/7/cc';
else if( chn ==  7 ) path = '/8/cc';
else if( chn ==  8 ) path = '/9/cc';
else if( chn ==  9 ) path = '/10/cc';
else if( chn == 10 ) path = '/11/cc';
else if( chn == 11 ) path = '/12/cc';
else if( chn == 12 ) path = '/13/cc';
else if( chn == 13 ) path = '/14/cc';
else if( chn == 14 ) path = '/15/cc';
else if( chn == 15 ) path = '/16/cc';

oscout(0, path, {cc, value});
" trigger_script="" trigger_type="4" trigger="1" osc_message="/sendOscCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="sendOscNote(ARGS)" script="decl chn = ARGS[0];
decl note = ARGS[1];
decl value = ARGS[2];

decl path = '/x/note';
     if( chn ==  0 ) path = '/1/note';
else if( chn ==  1 ) path = '/2/note';
else if( chn ==  2 ) path = '/3/note';
else if( chn ==  3 ) path = '/4/note';
else if( chn ==  4 ) path = '/5/note';
else if( chn ==  5 ) path = '/6/note';
else if( chn ==  6 ) path = '/7/note';
else if( chn ==  7 ) path = '/8/note';
else if( chn ==  8 ) path = '/9/note';
else if( chn ==  9 ) path = '/10/note';
else if( chn == 10 ) path = '/11/note';
else if( chn == 11 ) path = '/12/note';
else if( chn == 12 ) path = '/13/note';
else if( chn == 13 ) path = '/14/note';
else if( chn == 14 ) path = '/15/note';
else if( chn == 15 ) path = '/16/note';

oscout(0, path, {note, value});
" trigger_script="" trigger_type="4" trigger="1" osc_message="/sendOscNote" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</JZML>
